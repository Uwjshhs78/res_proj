[{"sha":"2f8a07c7fe247717b3d0ecf26eaea96c50bbee66","node_id":"C_kwDOD-DeNdoAKDJmOGEwN2M3ZmUyNDc3MTdiM2QwZWNmMjZlYWVhOTZjNTBiYmVlNjY","commit":{"author":{"name":"Pedro Ramos","email":"pedro.henrique@codeminer42.com","date":"2021-10-01T13:29:23Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-10-01T13:29:23Z"},"message":"Merge Develop to Master (#46)\n\n* Update README.md\r\n\r\n* Add INSTALLING.md\r\n\r\n* Add CONTRIBUTING.md\r\n\r\n* Add missing anchor\r\n\r\n* Add description\r\n\r\n* Adição do Docker Compose\r\n\r\nAdição do Docker para auxiliar o ambiente de desenvolvimento local.\r\n\r\n* Atualização no guia de instalação\r\n\r\nAdição da seção \"Instalação com Docker\"\r\n\r\n* Atualizar o nome da base de dados local\r\n\r\n* Correção de erro de digitação\r\n\r\n* Refatorar serviço de desafios\r\n\r\nRefatorar os serviços da API de desafios para melhor legibilidade e manuntenção\r\n\r\n* Corrigir erro de digitação\r\n\r\n* Atualizar .gitignore\r\n\r\n* Atualizar .huskyrc\r\n\r\nRegra está interferindo em múltiplas alterações\r\n\r\n* Atualizar linters\r\n\r\nPreparar ambiente de testes padronizado\r\n\r\n* Adicionar Jest as dev dependencies\r\n\r\nO arquivo yarn.lock não será necessário, remova-o\r\n\r\n* Formatar com o Linter\r\n\r\nDevido às correções de regras do ESLint, corrija os arquivos despadronizados\r\n\r\n* Adicionar supertest para testes de endpoints\r\n\r\n* Refatorar arquivo de inicialização\r\n\r\nRefatorar o setup do aplicativo web da inicialização do servidor para ser feito a implementação de testes\r\n\r\nAtualizar o Dockerfile devido a mudanças anteriores\r\n\r\n* Adicionar jest.config.js\r\n\r\n* Atualizar Dockerfile\r\n\r\nAdicionar `.env.test` para preparar o ambiente de testes\r\n\r\n* Adicionar primeiros testes\r\n\r\nAdicionar os helpers e primeiros testes de rotas\r\n\r\n* Refactor dotenv config\r\n\r\n* Create AuthRoutes\r\n-Creates the routes folder\r\n-Creates the authRoutes.js file that contains the authRouter that\r\ncontains placeholders routes for login, logout and authentication\r\nwith GitHub.\r\n-Modifies routes.js in order to mount the authRouter onto our main\r\nrouter at '/auth'.\r\n\r\n* Added passport and passport-github2 dependencies\r\n-Created config folder\r\n-Created the passportSetup.js file that contains placeholder\r\nconfigurations for the GitHub strategy and the passport callback\r\nfunction.\r\n\r\n* Used dotenv environment variables to define GitHub Strategy\r\nThe GitHub passport strategy at passportSetup requires a callback URL,\r\na client ID and a client secret.\r\n\r\n* Set passport authentication, scope and callback URI\r\n-Modified authRoutes to initiate authentication when /auth/github URI\r\nis accessed.\r\n-Modified authRoutes to set GitHub authorization scope to read:user\r\n(access to information in the user's profile).\r\n-Modified authRoutes to include the /github/callback URI.\r\n-Modified app.js to require passport because without this the application\r\ndoes not work.\r\n\r\n* Created GitHub OAuth callback function placeholder\r\n-Modified passportSetup to show the profile data in the callback\r\nfunction as a placeholder.\r\n-Modified authRoutes to trigger the placeholder callback function.\r\n\r\n* Added githubId field to the dev collection in Dev Model\r\n-Why? Because we need the GitHub id to match the GitHub account to a\r\nuser in our database when he uses the GitHub OAuth strategy. Using a\r\nuniversal id would not work if we implemented another OAuth strategy\r\nsuch as Google or Gitlabs.\r\n\r\n* Specified challenges.service file when requiring it in ChallengeController.js\r\n-Why? To avoid conflicts when requiring the module since we will\r\nintroduce other services such as the devs.service.js\r\n\r\n* Created devs.service.js\r\n-Created a service that is responsible for using Dev Model to:\r\n  -Fetch all devs\r\n  -Fetch a dev by its id field\r\n  -Fetch a dev by its githubid field\r\n  -Create a dev\r\n\r\n* Modified Dev Controller to use Devs Service instead of Dev Model\r\n-Why? To respect the DRY principle. It will be necessary to create\r\nand list users in other points of our application, so it's better to\r\nextract the code that will repeat into a separate service.\r\n\r\n* Implement create dev at passport GitHub strategy callback function\r\n-Modified the passportSetup.js file to create a new dev by using\r\ndev service\r\n\r\n* Check if dev already exists before saving him to the database\r\n-Modified passportSetup to check and return dev if he already exists\r\nbefore creating a record for him in the database\r\n\r\n* Implemented user serialize and deserialize for passport GitHub strategy\r\n-modified passportSetup.js to implement serializeUser and deserializerUser\r\n-modified passportSetup.js to rename variables to existingDev and newDev\r\n\r\n* Implemented cookie session\r\n-Modified app.js to implement a cookie session that is encrypted and\r\ndecrypted by using a key\r\n\r\n* Created Profile Routes and Redirects user to the profile after authentication\r\n-Created the profileRoutes responsible for the information sent after the user\r\naccesses his profile.\r\n-Modified routes.js to mount profileRoutes on the main rounter.\r\n-Modified authRoutes /github/callback URI to redirect to /profile after the\r\nuser is successfully authenticated.\r\n\r\n* Check if user is authenticated with ensureAuthenticated middleware\r\n-Modified profileRoutes.js to include a middleware that checks if the\r\nuser is authenticated. If not it redirects the user to the /login\r\n-Mounted ensureAuthenticated middleware on /profile\r\n\r\n* Implemented logout for passport GitHub OAuth strategy\r\n-Modified authRoutes.js in order to remove the req.user property,\r\ninvalidate the login session and redirect to the homepage ('/').\r\n\r\n* Updated /login to redirect user to profile if he is already logged in\r\n-Modified authRoutes.js file\r\n\r\n* Updated .env.example to include environment variables related to passport\r\n-Included GITHUB_CLIENT_ID\r\n-Included GITHUB_CLIENT_SECRET\r\n-Included PASSPORT_SESSION_COOKIE_KEY\r\n\r\n* Created Authentication Controller\r\n-Modified authRoutes.js to transfer code related to passport to\r\nthe authentication controller.\r\n\r\n* Separated ensureAuthenticated into an independent middleware\r\n-Modified profileRoutes.js to have ensureAuthenticated as a separate\r\nmiddleware.\r\n\r\n* Created provider folder for passportSetup\r\n-Modified passportSetup to break it up into separate parts.\r\n-Modified app.js to require index.js instead of passportSetup, since\r\nit will also contain the references to passport, passportSerialize\r\nand to passportDeserialize. All three are necessary since passportSetup\r\nwas broken up.\r\n\r\n* Adiciona filtro em desafios por: level e techs\r\n\r\n* Atualiza referência da API\r\n\r\n* Move lógica de filtragem para challenge.service.js\r\n\r\n* Cria função getFilters e troca map por reduce\r\n\r\n* detalhe\r\n\r\n* adiciona else dentro de reduce\r\n\r\n* Remove axios\r\n\r\nThe dependency is not being used anywhere. Uninstall it\r\n\r\n* Refactor MongoDB initialization\r\n\r\nThe database module should be isolated from the app in order to achieve the single responsibility on the app.js file\r\n\r\nRefactor the MongoDB config and initialization to its respective dedicated files\r\n\r\n* Refactor app boot logic\r\n\r\nModularize the app initialization file in order to achieve conciseness and a single responsibility for each boot step\r\n\r\n* Update MongoDB env locator\r\n\r\nThe env of the MongoDB connection string is MONGO_URL, and not DEVCHALLENGE_MONGO\r\n\r\n* Rename MongoDB URL env\r\n\r\nThe MongoDB connection string env name must be descriptive\r\n\r\n* Fix .editorconfig directory reference\r\n\r\nFix an small issue where the .editorconfig wouldn't correctly target files on the /src directory\r\n\r\n* Add challengedev model\r\n\r\n* Create challengedev controller\r\n\r\n* Add new challenges fields\r\n\r\nCo-authored-by: stevescruz <steve.silverio.cruz@gmail.com>\r\nCo-authored-by: Lorena GM <lorena@proesc.com>\r\nCo-authored-by: BrunoBatalha <brunobatalha37@gmail.com>\r\nCo-authored-by: Bruno Batalha <33035221+BrunoBatalha@users.noreply.github.com>","tree":{"sha":"4689393a9b7e23c56dc74f4a080ea0e5efad5bdd","url":"https://api.github.com/repos/Lorenalgm/DevChallengeAPI/git/trees/4689393a9b7e23c56dc74f4a080ea0e5efad5bdd"},"url":"https://api.github.com/repos/Lorenalgm/DevChallengeAPI/git/commits/2f8a07c7fe247717b3d0ecf26eaea96c50bbee66","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhVw0zCRBK7hj4Ov3rIwAA0agIAGVXOpzM0qq3EtSyoSbgvPyE\nlJ5yyVTjB0NQKbJb5qBoWu5L91AGptQrS/NGbRR2XnqIMpANDt4lVmc1S+HCwsG7\nsaE3dUst12Tw0rU2Kpr2yWMNuiXD3QUyAAkTTxkDRGExxBY1LB+oBkgwgNsYscah\ngWO9F4HhQQ66ERjlG3OwEeHVm4t8UgQBc2HQsVon+82Y6nS8zsS1ImoKq92A/kEB\nj6PwkBsfEvsmocQDkipIoFj2UwaIGEZZGYrHNIE+12dN8ablx+vukRcL/p1U+lcU\nJhdmWvgDvY9yNOQtLaye00irOdl1iGCiwYm98nSdxXX70m3DyWWmuse+k+Q/KHs=\n=aM1n\n-----END PGP SIGNATURE-----\n","payload":"tree 4689393a9b7e23c56dc74f4a080ea0e5efad5bdd\nparent 9f3b2621c91fbd11d38c783cfbf2f43e6b0e8a71\nauthor Pedro Ramos <pedro.henrique@codeminer42.com> 1633094963 -0300\ncommitter GitHub <noreply@github.com> 1633094963 -0300\n\nMerge Develop to Master (#46)\n\n* Update README.md\r\n\r\n* Add INSTALLING.md\r\n\r\n* Add CONTRIBUTING.md\r\n\r\n* Add missing anchor\r\n\r\n* Add description\r\n\r\n* Adição do Docker Compose\r\n\r\nAdição do Docker para auxiliar o ambiente de desenvolvimento local.\r\n\r\n* Atualização no guia de instalação\r\n\r\nAdição da seção \"Instalação com Docker\"\r\n\r\n* Atualizar o nome da base de dados local\r\n\r\n* Correção de erro de digitação\r\n\r\n* Refatorar serviço de desafios\r\n\r\nRefatorar os serviços da API de desafios para melhor legibilidade e manuntenção\r\n\r\n* Corrigir erro de digitação\r\n\r\n* Atualizar .gitignore\r\n\r\n* Atualizar .huskyrc\r\n\r\nRegra está interferindo em múltiplas alterações\r\n\r\n* Atualizar linters\r\n\r\nPreparar ambiente de testes padronizado\r\n\r\n* Adicionar Jest as dev dependencies\r\n\r\nO arquivo yarn.lock não será necessário, remova-o\r\n\r\n* Formatar com o Linter\r\n\r\nDevido às correções de regras do ESLint, corrija os arquivos despadronizados\r\n\r\n* Adicionar supertest para testes de endpoints\r\n\r\n* Refatorar arquivo de inicialização\r\n\r\nRefatorar o setup do aplicativo web da inicialização do servidor para ser feito a implementação de testes\r\n\r\nAtualizar o Dockerfile devido a mudanças anteriores\r\n\r\n* Adicionar jest.config.js\r\n\r\n* Atualizar Dockerfile\r\n\r\nAdicionar `.env.test` para preparar o ambiente de testes\r\n\r\n* Adicionar primeiros testes\r\n\r\nAdicionar os helpers e primeiros testes de rotas\r\n\r\n* Refactor dotenv config\r\n\r\n* Create AuthRoutes\r\n-Creates the routes folder\r\n-Creates the authRoutes.js file that contains the authRouter that\r\ncontains placeholders routes for login, logout and authentication\r\nwith GitHub.\r\n-Modifies routes.js in order to mount the authRouter onto our main\r\nrouter at '/auth'.\r\n\r\n* Added passport and passport-github2 dependencies\r\n-Created config folder\r\n-Created the passportSetup.js file that contains placeholder\r\nconfigurations for the GitHub strategy and the passport callback\r\nfunction.\r\n\r\n* Used dotenv environment variables to define GitHub Strategy\r\nThe GitHub passport strategy at passportSetup requires a callback URL,\r\na client ID and a client secret.\r\n\r\n* Set passport authentication, scope and callback URI\r\n-Modified authRoutes to initiate authentication when /auth/github URI\r\nis accessed.\r\n-Modified authRoutes to set GitHub authorization scope to read:user\r\n(access to information in the user's profile).\r\n-Modified authRoutes to include the /github/callback URI.\r\n-Modified app.js to require passport because without this the application\r\ndoes not work.\r\n\r\n* Created GitHub OAuth callback function placeholder\r\n-Modified passportSetup to show the profile data in the callback\r\nfunction as a placeholder.\r\n-Modified authRoutes to trigger the placeholder callback function.\r\n\r\n* Added githubId field to the dev collection in Dev Model\r\n-Why? Because we need the GitHub id to match the GitHub account to a\r\nuser in our database when he uses the GitHub OAuth strategy. Using a\r\nuniversal id would not work if we implemented another OAuth strategy\r\nsuch as Google or Gitlabs.\r\n\r\n* Specified challenges.service file when requiring it in ChallengeController.js\r\n-Why? To avoid conflicts when requiring the module since we will\r\nintroduce other services such as the devs.service.js\r\n\r\n* Created devs.service.js\r\n-Created a service that is responsible for using Dev Model to:\r\n  -Fetch all devs\r\n  -Fetch a dev by its id field\r\n  -Fetch a dev by its githubid field\r\n  -Create a dev\r\n\r\n* Modified Dev Controller to use Devs Service instead of Dev Model\r\n-Why? To respect the DRY principle. It will be necessary to create\r\nand list users in other points of our application, so it's better to\r\nextract the code that will repeat into a separate service.\r\n\r\n* Implement create dev at passport GitHub strategy callback function\r\n-Modified the passportSetup.js file to create a new dev by using\r\ndev service\r\n\r\n* Check if dev already exists before saving him to the database\r\n-Modified passportSetup to check and return dev if he already exists\r\nbefore creating a record for him in the database\r\n\r\n* Implemented user serialize and deserialize for passport GitHub strategy\r\n-modified passportSetup.js to implement serializeUser and deserializerUser\r\n-modified passportSetup.js to rename variables to existingDev and newDev\r\n\r\n* Implemented cookie session\r\n-Modified app.js to implement a cookie session that is encrypted and\r\ndecrypted by using a key\r\n\r\n* Created Profile Routes and Redirects user to the profile after authentication\r\n-Created the profileRoutes responsible for the information sent after the user\r\naccesses his profile.\r\n-Modified routes.js to mount profileRoutes on the main rounter.\r\n-Modified authRoutes /github/callback URI to redirect to /profile after the\r\nuser is successfully authenticated.\r\n\r\n* Check if user is authenticated with ensureAuthenticated middleware\r\n-Modified profileRoutes.js to include a middleware that checks if the\r\nuser is authenticated. If not it redirects the user to the /login\r\n-Mounted ensureAuthenticated middleware on /profile\r\n\r\n* Implemented logout for passport GitHub OAuth strategy\r\n-Modified authRoutes.js in order to remove the req.user property,\r\ninvalidate the login session and redirect to the homepage ('/').\r\n\r\n* Updated /login to redirect user to profile if he is already logged in\r\n-Modified authRoutes.js file\r\n\r\n* Updated .env.example to include environment variables related to passport\r\n-Included GITHUB_CLIENT_ID\r\n-Included GITHUB_CLIENT_SECRET\r\n-Included PASSPORT_SESSION_COOKIE_KEY\r\n\r\n* Created Authentication Controller\r\n-Modified authRoutes.js to transfer code related to passport to\r\nthe authentication controller.\r\n\r\n* Separated ensureAuthenticated into an independent middleware\r\n-Modified profileRoutes.js to have ensureAuthenticated as a separate\r\nmiddleware.\r\n\r\n* Created provider folder for passportSetup\r\n-Modified passportSetup to break it up into separate parts.\r\n-Modified app.js to require index.js instead of passportSetup, since\r\nit will also contain the references to passport, passportSerialize\r\nand to passportDeserialize. All three are necessary since passportSetup\r\nwas broken up.\r\n\r\n* Adiciona filtro em desafios por: level e techs\r\n\r\n* Atualiza referência da API\r\n\r\n* Move lógica de filtragem para challenge.service.js\r\n\r\n* Cria função getFilters e troca map por reduce\r\n\r\n* detalhe\r\n\r\n* adiciona else dentro de reduce\r\n\r\n* Remove axios\r\n\r\nThe dependency is not being used anywhere. Uninstall it\r\n\r\n* Refactor MongoDB initialization\r\n\r\nThe database module should be isolated from the app in order to achieve the single responsibility on the app.js file\r\n\r\nRefactor the MongoDB config and initialization to its respective dedicated files\r\n\r\n* Refactor app boot logic\r\n\r\nModularize the app initialization file in order to achieve conciseness and a single responsibility for each boot step\r\n\r\n* Update MongoDB env locator\r\n\r\nThe env of the MongoDB connection string is MONGO_URL, and not DEVCHALLENGE_MONGO\r\n\r\n* Rename MongoDB URL env\r\n\r\nThe MongoDB connection string env name must be descriptive\r\n\r\n* Fix .editorconfig directory reference\r\n\r\nFix an small issue where the .editorconfig wouldn't correctly target files on the /src directory\r\n\r\n* Add challengedev model\r\n\r\n* Create challengedev controller\r\n\r\n* Add new challenges fields\r\n\r\nCo-authored-by: stevescruz <steve.silverio.cruz@gmail.com>\r\nCo-authored-by: Lorena GM <lorena@proesc.com>\r\nCo-authored-by: BrunoBatalha <brunobatalha37@gmail.com>\r\nCo-authored-by: Bruno Batalha <33035221+BrunoBatalha@users.noreply.github.com>"}},"url":"https://api.github.com/repos/Lorenalgm/DevChallengeAPI/commits/2f8a07c7fe247717b3d0ecf26eaea96c50bbee66","html_url":"https://github.com/Lorenalgm/DevChallengeAPI/commit/2f8a07c7fe247717b3d0ecf26eaea96c50bbee66","comments_url":"https://api.github.com/repos/Lorenalgm/DevChallengeAPI/commits/2f8a07c7fe247717b3d0ecf26eaea96c50bbee66/comments","author":{"login":"ramos-ph","id":50644753,"node_id":"MDQ6VXNlcjUwNjQ0NzUz","avatar_url":"https://avatars.githubusercontent.com/u/50644753?v=4","gravatar_id":"","url":"https://api.github.com/users/ramos-ph","html_url":"https://github.com/ramos-ph","followers_url":"https://api.github.com/users/ramos-ph/followers","following_url":"https://api.github.com/users/ramos-ph/following{/other_user}","gists_url":"https://api.github.com/users/ramos-ph/gists{/gist_id}","starred_url":"https://api.github.com/users/ramos-ph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramos-ph/subscriptions","organizations_url":"https://api.github.com/users/ramos-ph/orgs","repos_url":"https://api.github.com/users/ramos-ph/repos","events_url":"https://api.github.com/users/ramos-ph/events{/privacy}","received_events_url":"https://api.github.com/users/ramos-ph/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"9f3b2621c91fbd11d38c783cfbf2f43e6b0e8a71","url":"https://api.github.com/repos/Lorenalgm/DevChallengeAPI/commits/9f3b2621c91fbd11d38c783cfbf2f43e6b0e8a71","html_url":"https://github.com/Lorenalgm/DevChallengeAPI/commit/9f3b2621c91fbd11d38c783cfbf2f43e6b0e8a71"}]}]