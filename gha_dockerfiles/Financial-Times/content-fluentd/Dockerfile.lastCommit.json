[{"sha":"603d87d5bcde0895bee8edebab8ab15d310746aa","node_id":"MDY6Q29tbWl0MTMxMTQxMzg4OjYwM2Q4N2Q1YmNkZTA4OTViZWU4ZWRlYmFiOGFiMTVkMzEwNzQ2YWE=","commit":{"author":{"name":"Dimitar Terziev","email":"dimitar.terziev@ft.com","date":"2019-10-15T06:59:00Z"},"committer":{"name":"GoranYordanov11","email":"45259802+GoranYordanov11@users.noreply.github.com","date":"2019-10-15T06:59:00Z"},"message":"Feature/cph 121 replicate log collector processing (#9)\n\n* Update fluent.conf with S3 settings\r\n\r\n* Add new ruby gem\r\n\r\n* Fix S3 credentials\r\n\r\n* Add aws secrets\r\n\r\n* Update aws s3 iam\r\n\r\n* update fluentd config\r\n\r\n* update matching rules\r\n\r\n* Disable tag rewriting\r\n\r\n* Update filters and matching rules\r\n\r\n* Update S3 plugin buffers\r\n\r\n* Fix timeslice config\r\n\r\n* update fluentd version\r\n\r\n* Update fluentd\r\n\r\n* Update fluentd\r\n\r\n* Update Fluentd to latest stable\r\n\r\n* Update Ruby Gems and dependencies\r\n\r\n* Update parser\r\n\r\n* Refactoring code to match  FluentD v1.0 (latest stable)\r\n\r\n* Fix parser code.\r\n\r\n* More filters added\r\n\r\n* change rules order.\r\n\r\n* update config\r\n\r\n* Update json parser\r\n\r\n* Update json format\r\n\r\n* Update Json output format to match required one from SPLUNK\r\n\r\n* update S3 output\r\n\r\n* update s3 plugin settings\r\n\r\n* Update Time attribute\r\n\r\n* Fix timestamp\r\n\r\n* Update Helm chart and S3 Paths\r\n\r\n* Add Varnish regex format, reorganize filter rules.\r\n\r\n* fix buffer name\r\n\r\n* Update varnish parse regex\r\n\r\n* create new parser filter section\r\n\r\n* fix regex parser\r\n\r\n* update parser\r\n\r\n* disable varnish regex\r\n\r\n* fix fluentd syntax\r\n\r\n* add POD Name\r\n\r\n* Update varnish regex\r\n\r\n* Fix POD_NAME field\r\n\r\n* Modify varnish regex expression\r\n\r\n* Update Helm config\r\n\r\n* Fix Kinesis log stream\r\n\r\n* Fix Kinesis Credentials\r\n\r\n* Test Kinesis stream\r\n\r\n* Update AWS credentials\r\n\r\n* test kinesis streams\r\n\r\n* Test kinesis strteam\r\n\r\n* test kinesis streams\r\n\r\n* test kinesis\r\n\r\n* test kinesis streams\r\n\r\n* test fluentd stream\r\n\r\n* test kinesis streams\r\n\r\n* Test Kinesis filters\r\n\r\n* update rules and filters\r\n\r\n* add copy output\r\n\r\n* fix buffer path\r\n\r\n* update json parsing rule\r\n\r\n* Add new regex rule\r\n\r\n* Test Kinesis streams\r\n\r\n* Enable S3 output\r\n\r\n* Improve matching rules.\r\n\r\n* add copy directive for annotation logs\r\n\r\n* add deep copy feature\r\n\r\n* Update S3 buffers\r\n\r\n* Restructure annotation logs\r\n\r\n* Update S3 bucket and fluentd labels\r\n\r\n* Reconfigure S3 buffer settings\r\n\r\n* Update Fluentd version\r\n\r\n* update buffer plugin\r\n\r\n* Update fluent-plugin-rewrite-tag-filter plugin\r\n\r\n* Update fluentd rules\r\n\r\n* update matching patern\r\n\r\n* Update docker syntax\r\n\r\n* Removing rewritter\r\n\r\n* disable S3 json format\r\n\r\n* Setup memory buffer\r\n\r\n* Update buffer plugin\r\n\r\n* disable filters\r\n\r\n* Testing without rewriting to event and time json\r\n\r\n* Disable annotations filter\r\n\r\n* Disable splunk filter\r\n\r\n* Disable record transfor filters\r\n\r\n* disable S3 output\r\n\r\n* Update docker image\r\n\r\n* Disable all filters and plugins\r\n\r\n* Enable only initial record transformer\r\n\r\n* Enable matching rules\r\n\r\n* Enable parsing rules\r\n\r\n* Enable record transformer rules\r\n\r\n* Enable output plugins and S3 tranfer\r\n\r\n* Update filters to match docker.service names\r\n\r\n* Improve buffer and output plugins\r\n\r\n* Disable part of the filters in order to improve performance\r\n\r\n* Disable regex and json parsers\r\n\r\n* Disable parsers\r\nEnable output plugins\r\n\r\n* fix config syntax\r\n\r\n* Change output buffer to file. Update interval and chunk size\r\n\r\n* enable log level debug\r\n\r\n* add FLUENT_LOG label\r\n\r\n* replace record_transformer with record modifier plugin\r\n\r\n* fix syntax\r\n\r\n* Increase chunk limit\r\n\r\n* add gem \"fluent-plugin-record-modifier\"\r\n\r\n* Set flusht interval to 2 minutes\r\n\r\n* Optimize chunk size, flush interval, log levels\r\n\r\n* Test performance settings\r\n\r\n* Change docker service tagging\r\n\r\n* Update performance settings\r\n\r\n* Adjust flush interval, thread count, chunk limit size\r\n\r\n* various performance improvements\r\n\r\n* fix  record transformer rules\r\n\r\n* Fix syntax\r\n\r\n* Fix annotations filters and improve various settings\r\n\r\n* fix record_transformer syntax\r\n\r\n* fix record_transformer syntax\r\n\r\n* Add json parser for annotation logs\r\n\r\n* Update filters\r\n\r\n* Set kinesis flush interval to 2 seconds\r\n\r\n* tune buffers and filters\r\n\r\n* Tune systemd plugin and s3 output settings\r\n\r\n* Enable all parsers and filters. Clean Code.\r\n\r\n* rework systemd match rule\r\n\r\n* update retagging rules\r\n\r\n* fix typo\r\n\r\n* add all docker.* logs to event/time rule\r\n\r\n* Reorder match rules.\r\n\r\n* forward kubelet logs to stdout for troubleshooting\r\n\r\n* update matching rules\r\n\r\n* fix timestamp field\r\n\r\n* test unixtime timestamp\r\n\r\n* tesdt timestamp\r\n\r\n* Exclude field _SOURCE_REALTIME_TIMESTAMP from deleted fields\r\n\r\n* Add new blacklist group\r\n\r\n* Clean code, add comments.\r\n\r\n* Increase memory to 400m\r\n\r\n* Fix timestamp value\r\n\r\n* disable varnish parser\r\n\r\n* fix resilient-splunk-forwarder related errors\r\n\r\n* Update fluentd timestamps\r\n\r\n* Fix json parser time format\r\n\r\n* Add timestamp to json parser and test\r\n\r\n* Improve filters order\r\n\r\n* Add new time variable LOGTIME\r\n\r\n* fix typo\r\n\r\n* Fix null LOGTIME value.\r\n\r\n* Convert LOGTIME time format\r\n\r\n* Add \"\" instead of '' (Ruby requirements)\r\n\r\n* Link LOGTIME with time field and convert to epoch\r\n\r\n* update LOGTIME field\r\n\r\n* Add miliseconds to LOGTIME field\r\n\r\n* Changes in events timestamp, helm values.\r\n\r\n* Fix typo in helm chart\r\n\r\n* Add MACHINE ID\r\nDisable option \"Reserve Data\" on json parser\r\nOther Minor fixes\r\n\r\n* Add \"remove_key_name_field\" option for all parsers\r\n\r\n* Add to parsers:\r\n- remove_key_name_field true\r\n- reserve_data true","tree":{"sha":"bf0e3b6fd3b455107ed67d0a82457c860eee0f00","url":"https://api.github.com/repos/Financial-Times/content-fluentd/git/trees/bf0e3b6fd3b455107ed67d0a82457c860eee0f00"},"url":"https://api.github.com/repos/Financial-Times/content-fluentd/git/commits/603d87d5bcde0895bee8edebab8ab15d310746aa","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/Financial-Times/content-fluentd/commits/603d87d5bcde0895bee8edebab8ab15d310746aa","html_url":"https://github.com/Financial-Times/content-fluentd/commit/603d87d5bcde0895bee8edebab8ab15d310746aa","comments_url":"https://api.github.com/repos/Financial-Times/content-fluentd/commits/603d87d5bcde0895bee8edebab8ab15d310746aa/comments","author":{"login":"mitagg","id":3042889,"node_id":"MDQ6VXNlcjMwNDI4ODk=","avatar_url":"https://avatars.githubusercontent.com/u/3042889?v=4","gravatar_id":"","url":"https://api.github.com/users/mitagg","html_url":"https://github.com/mitagg","followers_url":"https://api.github.com/users/mitagg/followers","following_url":"https://api.github.com/users/mitagg/following{/other_user}","gists_url":"https://api.github.com/users/mitagg/gists{/gist_id}","starred_url":"https://api.github.com/users/mitagg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitagg/subscriptions","organizations_url":"https://api.github.com/users/mitagg/orgs","repos_url":"https://api.github.com/users/mitagg/repos","events_url":"https://api.github.com/users/mitagg/events{/privacy}","received_events_url":"https://api.github.com/users/mitagg/received_events","type":"User","site_admin":false},"committer":{"login":"GoranYordanov11","id":45259802,"node_id":"MDQ6VXNlcjQ1MjU5ODAy","avatar_url":"https://avatars.githubusercontent.com/u/45259802?v=4","gravatar_id":"","url":"https://api.github.com/users/GoranYordanov11","html_url":"https://github.com/GoranYordanov11","followers_url":"https://api.github.com/users/GoranYordanov11/followers","following_url":"https://api.github.com/users/GoranYordanov11/following{/other_user}","gists_url":"https://api.github.com/users/GoranYordanov11/gists{/gist_id}","starred_url":"https://api.github.com/users/GoranYordanov11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GoranYordanov11/subscriptions","organizations_url":"https://api.github.com/users/GoranYordanov11/orgs","repos_url":"https://api.github.com/users/GoranYordanov11/repos","events_url":"https://api.github.com/users/GoranYordanov11/events{/privacy}","received_events_url":"https://api.github.com/users/GoranYordanov11/received_events","type":"User","site_admin":false},"parents":[{"sha":"906dc26c7f0fd5e03e757977c22a2048002f18b0","url":"https://api.github.com/repos/Financial-Times/content-fluentd/commits/906dc26c7f0fd5e03e757977c22a2048002f18b0","html_url":"https://github.com/Financial-Times/content-fluentd/commit/906dc26c7f0fd5e03e757977c22a2048002f18b0"}]}]