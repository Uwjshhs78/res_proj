[{"sha":"f760e0fc03baacb949650e6ada248ff8b9fd4c91","node_id":"MDY6Q29tbWl0NDAxNzUzMTU0OmY3NjBlMGZjMDNiYWFjYjk0OTY1MGU2YWRhMjQ4ZmY4YjlmZDRjOTE=","commit":{"author":{"name":"Alessio Fabiani","email":"alessio.fabiani@geo-solutions.it","date":"2021-07-08T14:48:25Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-07-08T14:48:25Z"},"message":"GNIP 89: Architecture Design - Resource and Storage Manager Modules (#7670)\n\n* Generalization of update method, rename gs_resource and fix regiorns\r\n\r\n* Refactor append and replace with resource_manager\r\n\r\n* [Resource Manager] Move Security logic to the Resource Manager\r\n\r\n* [Resource Manager] Move Security logic to the Resource Manager\r\n\r\n* [Resource Manager] Move Security logic to the Resource Manager\r\n\r\n* Handling resource storing via replace or append\r\n\r\n* Handling resource storing via replace or append\r\n\r\n* Enrich replace/append, fix broken thumburl in panels\r\n\r\n* Add storage of files for resource_manager.append\r\n\r\n* Pr comments: fix layer permission error, add header in new file, remove dependencies with gs_catalog from resource_manager, add layer storage into revise_resource_value\r\n\r\n* Fix curated_thumbnail and let it store the file via storage_manager. Add new def to storages and rollback curated thumb for app and doc\r\n\r\n* Fix curated_thumbnail and let it store the file via storage_manager. Add new def to storages and rollback curated thumb for app and doc\r\n\r\n* Add missign migration file for curatedthub\r\n\r\n* [Minor][Code Cleanup] rename \"_storage_manager\" to \"_concrete_storage_manager\"\r\n\r\n* Rename storeType value in geonode\r\n\r\n* Fix pr comments\r\n\r\n* Fix pr comments\r\n\r\n* Missing migration files\r\n\r\n* Flake8 formatting\r\n\r\n* Update requirements.txt\r\n\r\n* [Pep8] Using f-strings instead of concatenated strings\r\n\r\n* [Dependencies] typo on the requirements repo definition\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* First draft of adding blob field to ResourceBase\r\n\r\n* [Resource Manager] Fix \"set_permissions\" removal method\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* Fix data serializer in order to retreive data blob only if required\r\n\r\n* Resourcebase migration file\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* [LGTM] Fix LGTM Issues\r\n\r\n* [LGTM] Fix LGTM Issues\r\n\r\n* Remove unused models\r\n\r\n* Remove unused models\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* - Fix \"synch_guardian\" celery task\r\n\r\n* Fix geostory value update\r\n\r\n* [Ref https://github.com/GeoNode/geonode/issues/7298] json field dependency confusion\r\n\r\n* Fix migrations process\r\n\r\n* - Update docker entries logs and ngix image\r\n\r\n* Fix Map creation\r\n\r\n* Fix Map creation\r\n\r\n* - Move data/blob serializer to ResourceBase\r\n\r\n* - Pep8 issues\r\n\r\n* - Fix geoapp serializer\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [GeoStories] Fix data save as JSON\r\n\r\n* Fix error in save geostory metadata\r\n\r\n* Exclude blob and files from resourcebase form\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* Minor bugfix for maps and resource update\r\n\r\n* Fix storage manager tests\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* Fix storage manager tests\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* - Fixes GeoServer append/replace operation\r\n\r\n* - Fixes GeoServer append/replace operation\r\n\r\n* [Fixes https://github.com/geosolutions-it/nexus-geonode/issues/225] Legends links on maps are broken\r\n\r\n* FIx serializer\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [Fixes https://github.com/GeoNode/geonode/issues/7675] Problem creating thumbnail\r\n\r\n* [LGTM] Do not modify the source dictionary\r\n\r\n* [WIP] [Resource Manager] Copy operation\r\n\r\n* [Code Quality] Run pyupgrade to ensure the code is modernized.\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* [Resource Manager] Implemented \"copy\" method\r\n\r\n* [Fixes #220]: Trying to delete a resource from the main page fails\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* - Fix and merge migrations\r\n\r\n* Initial draft of new harvesting app\r\n\r\n* Continue implementation of base harvesting infrastructure\r\n\r\n* Add string representation to harvester model\r\n\r\n* Add django_celery_results to enable storing results integrated with django\r\n\r\nAlso:\r\n\r\n- Add resource descriptor base classes\r\n- Start parsing CSW record\r\n- Draft harvesting task\r\n\r\n* Extract relevant information from a remote GeoNode resource\r\n\r\n* Add ability to parse harvester type specific config with jsonschema\r\n\r\nAlso add a stricter XML parser and use it\r\n\r\n* Use API v1 for the GeoNode legacy harvester\r\n\r\nThis is now being used over the CSW API because there doesn't seem to be any way to filter specific resource types (document, layer, etc) when using the CSW API.\r\n\r\nAlso begin adding a WMS harvester\r\n\r\n* Continue implementation\r\n\r\n* Add harvestable resource list and some way to control them - wip\r\n\r\n* Refactor harvesting in order to take into account selection of which resources should be harvested\r\n\r\n* Automatically check harvestable resources when creating a harvester\r\n\r\nThis is done when creating a harvester both on the django admin and also via REST API\r\n\r\n* Made BaseHarvesterWorker a proper AbstractBaseClass\r\n\r\nThis shall make the interface that child harvesters neet to implement be more evident.\r\n\r\nAlso refactored API endpoints for accessing a harvester's harvestable resources and managing their respective `should_be_harvested` property.\r\n\r\nImplementation is relying on nested routers, as provided by the drf-extensions package\r\n\r\n* Work on REST API for harvesting\r\n\r\nA harvester reource's status can be set to one of the predefined values in order to request updates of the harvester data\r\n\r\n* Implement regeneration of harvestable resources when worker config is changed via admin and API\r\n\r\n* Refactor base harvester worker\r\n\r\nThe harvesting async workflow seems to be mostly modelled now, with the GeoNode legacy harvester as a reference implementation of a worker\r\n\r\nThis commit has some other WIP changes\r\n\r\n* Launch update of harvestble resources with django's on_commit in order to ensure correct behavior\r\n\r\n* Add some docstrings\r\n\r\n* fix some bugs and add support for django 3.2\r\n\r\n* Store a list of CRSs instead of a single one\r\n\r\n* base harvester provides a concrete implementation of update_geonode_resource\r\n\r\nPreviously this was an abstract method, but it is more sensible to provide a default. Note that the actual implementation of this method is not done yet.\r\n\r\n* Adjust name of harvesting dispatcher task in serializers.py\r\n\r\n* Update harvester to update using ResourceManager\r\n\r\n* Fix jsonfield error\r\n\r\n* adapting base worker\r\n\r\n* fix failing test\r\n\r\n* [Resource Manager] Implement \"copy\" resource method #224\r\n\r\n* Initial integration with resource_manager for the GeoNode harvester\r\n\r\n* [Fixes #7692] Layers caching problem (#7691)\r\n\r\n* Implement removal of harvestable resources that are no longer relevant\r\n\r\nAlso improved GeoNodeLegacyHarvester's abilities to report on existing remote resources. This now takes into account the current preferences for harvesting layers, maps and documents\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* [Issue 80] Add name and typename to legacy api\r\n\r\n* [Issue 80] Add links to v2 api\r\n\r\n* [Issue 80] rollback unwanted changes\r\n\r\n* Implement removal of orphaned resources\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* Implement saving a document's URL and thumbnail in the GeoNode harvesting worker\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* - PEP8 issues plus a minor refactoring of the harvesting api urls pattern\r\n\r\n* - PEP8 issues use logger.exception accordingly to the doc and remove unneeded exceptions concat\r\n\r\n* get rid of redundant exception logging\r\n\r\n* Fix error pk assignee by sequnce object\r\n\r\n* - Make sure the \"saved_layer\" is valid\r\n\r\n* Extend HarvesterWorkerBase to allow creating other types of geonode resources\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* - Add \"rabbitmqadmin\" shell utility command\r\n\r\n* [CircleCI] Fix and speedup security tests\r\n\r\n* Make resource description more flexible in order to handle missing values\r\n\r\n* [Pep8] Fix issues\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [Fixes #7717] Temporary files created under static root are never removed\r\n\r\n* [Pep8] Fix issues\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [Fixes #7717] Temporary files created under static root are never removed\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* Missing changes from 7693\r\n\r\n* Missing changes from 7693\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [Fixes #262] Rename Layer / Layers to Dataset / Datasets inside operations pages\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* Add mo files\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* Modify button links\r\n\r\n* - Typo: UnboundLocalError: local variable '_disable_layer_cache' referenced before assignment\r\n\r\n* [Resource Manager] Make the RM able to set thumbs for Documents also\r\n\r\n* - Avoid redundant logs on error stdout\r\n\r\n* - Added local enviroment to simplify people advanced install setup\r\n\r\n* [Hardening] Improve background error logging and avoid usefulness cycles in the case the image is good\r\n\r\n* [Dependencies] Align \"setup.cfg\" to the \"requirements.txt\" file\r\n\r\n* Fix MetaData update redirect\r\n\r\n* [Resource Manager] Ingest method\r\n\r\n* [Hardening] Catch IntegrityError on contributios migrations\r\n\r\n* ISSUE 277: add storetype to resourcebase\r\n\r\n* [Resource Manager] GeoServer concrete \"ingest\": make a temporary local copy of the stored files\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [Pep8] Fix pep8 issues\r\n\r\n(cherry picked from commit 7360cdb6708759f7ee7e91f003fd254691816fd6)\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* ISSUE 277: rename storetype for layers\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [ISSUE  #298] Add state property to resources endpoint response\r\n\r\n* Rename endpoint from layers to datasets\r\n\r\n* [WIP][ISSUE #299] Expose resource manager methods as resource REST API endpoints\r\n\r\n* [WIP][ISSUE #299] Expose resource manager methods as resource REST API endpoints\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* change Layer to Dataset\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [WIP][ISSUE #299] Expose resource manager methods as resource REST API endpoints\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* - Optimize migrations\r\n\r\n - Fix wrong field on resource/utils.py methods\r\n\r\n* - Fix Migrations\r\n\r\n* - Bump django-geonode-mapstore-client to version 4.0.0\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* Rename endpoint from layers to datasets #885\r\n\r\nCo-authored-by: mattiagiupponi <mattia.giupponi@gmail.com>\r\nCo-authored-by: mattiagiupponi <51856725+mattiagiupponi@users.noreply.github.com>\r\nCo-authored-by: marthamareal <marthamareal@gmail.com>\r\nCo-authored-by: Ricardo Garcia Silva <ricardo@kartoza.com>\r\nCo-authored-by: meomancer <meomancer@gmail.com>\r\nCo-authored-by: Giovanni Allegri <571129+giohappy@users.noreply.github.com>\r\nCo-authored-by: Giovanni Allegri <giohappy@gmail.com>","tree":{"sha":"7c87829dc38013e77d8577bfc3e8e8c60e814be5","url":"https://api.github.com/repos/italogsfernandes/geonode/git/trees/7c87829dc38013e77d8577bfc3e8e8c60e814be5"},"url":"https://api.github.com/repos/italogsfernandes/geonode/git/commits/f760e0fc03baacb949650e6ada248ff8b9fd4c91","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg5xA5CRBK7hj4Ov3rIwAA95sIAJqDuzB9wFmJbE+R92J4lYxw\nDJqFJvj1/6HhgSYPOPemKd1kjyZ6VnwcNrr81SVbXwKSUpvDWHDM3BbHe/T4/nbI\n8TuihWIpnErJwPyC5jDqjTHzo4ZU2ZisAfLWT1ykpjimrN/nD14o8NnVXS8zPrUt\nHRyjokRuD8cOZ+M0KDmVhq0o5YgkWBK008k9HtOSg8hg+/Gpv6p5dcxPj+EizVle\nCN5WffXILe4T219DCRvKTG2pzrc4XaGphMGtCmaWF9JybL1U1RewavpiON4q4Nor\n9nqxIdSt0Z9zJxJTM3SprsRmh8X8ygm71LWMD+lBfAy28nYiMDm5mAs+uv9zH9s=\n=hAEA\n-----END PGP SIGNATURE-----\n","payload":"tree 7c87829dc38013e77d8577bfc3e8e8c60e814be5\nparent dcaaed932b37131b0ce37a15b8641111d9f21106\nauthor Alessio Fabiani <alessio.fabiani@geo-solutions.it> 1625755705 +0200\ncommitter GitHub <noreply@github.com> 1625755705 +0200\n\nGNIP 89: Architecture Design - Resource and Storage Manager Modules (#7670)\n\n* Generalization of update method, rename gs_resource and fix regiorns\r\n\r\n* Refactor append and replace with resource_manager\r\n\r\n* [Resource Manager] Move Security logic to the Resource Manager\r\n\r\n* [Resource Manager] Move Security logic to the Resource Manager\r\n\r\n* [Resource Manager] Move Security logic to the Resource Manager\r\n\r\n* Handling resource storing via replace or append\r\n\r\n* Handling resource storing via replace or append\r\n\r\n* Enrich replace/append, fix broken thumburl in panels\r\n\r\n* Add storage of files for resource_manager.append\r\n\r\n* Pr comments: fix layer permission error, add header in new file, remove dependencies with gs_catalog from resource_manager, add layer storage into revise_resource_value\r\n\r\n* Fix curated_thumbnail and let it store the file via storage_manager. Add new def to storages and rollback curated thumb for app and doc\r\n\r\n* Fix curated_thumbnail and let it store the file via storage_manager. Add new def to storages and rollback curated thumb for app and doc\r\n\r\n* Add missign migration file for curatedthub\r\n\r\n* [Minor][Code Cleanup] rename \"_storage_manager\" to \"_concrete_storage_manager\"\r\n\r\n* Rename storeType value in geonode\r\n\r\n* Fix pr comments\r\n\r\n* Fix pr comments\r\n\r\n* Missing migration files\r\n\r\n* Flake8 formatting\r\n\r\n* Update requirements.txt\r\n\r\n* [Pep8] Using f-strings instead of concatenated strings\r\n\r\n* [Dependencies] typo on the requirements repo definition\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* First draft of adding blob field to ResourceBase\r\n\r\n* [Resource Manager] Fix \"set_permissions\" removal method\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* Fix data serializer in order to retreive data blob only if required\r\n\r\n* Resourcebase migration file\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* [LGTM] Fix LGTM Issues\r\n\r\n* [LGTM] Fix LGTM Issues\r\n\r\n* Remove unused models\r\n\r\n* Remove unused models\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* - Fix \"synch_guardian\" celery task\r\n\r\n* Fix geostory value update\r\n\r\n* [Ref https://github.com/GeoNode/geonode/issues/7298] json field dependency confusion\r\n\r\n* Fix migrations process\r\n\r\n* - Update docker entries logs and ngix image\r\n\r\n* Fix Map creation\r\n\r\n* Fix Map creation\r\n\r\n* - Move data/blob serializer to ResourceBase\r\n\r\n* - Pep8 issues\r\n\r\n* - Fix geoapp serializer\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [GeoStories] Fix data save as JSON\r\n\r\n* Fix error in save geostory metadata\r\n\r\n* Exclude blob and files from resourcebase form\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* Minor bugfix for maps and resource update\r\n\r\n* Fix storage manager tests\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* Fix storage manager tests\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* - Fixes GeoServer append/replace operation\r\n\r\n* - Fixes GeoServer append/replace operation\r\n\r\n* [Fixes https://github.com/geosolutions-it/nexus-geonode/issues/225] Legends links on maps are broken\r\n\r\n* FIx serializer\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [Fixes https://github.com/GeoNode/geonode/issues/7675] Problem creating thumbnail\r\n\r\n* [LGTM] Do not modify the source dictionary\r\n\r\n* [WIP] [Resource Manager] Copy operation\r\n\r\n* [Code Quality] Run pyupgrade to ensure the code is modernized.\r\n\r\n* [Dependencies] Align setup.cfg to requirements.txt\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* [Resource Manager] Implemented \"copy\" method\r\n\r\n* [Fixes #220]: Trying to delete a resource from the main page fails\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* - Fix and merge migrations\r\n\r\n* Initial draft of new harvesting app\r\n\r\n* Continue implementation of base harvesting infrastructure\r\n\r\n* Add string representation to harvester model\r\n\r\n* Add django_celery_results to enable storing results integrated with django\r\n\r\nAlso:\r\n\r\n- Add resource descriptor base classes\r\n- Start parsing CSW record\r\n- Draft harvesting task\r\n\r\n* Extract relevant information from a remote GeoNode resource\r\n\r\n* Add ability to parse harvester type specific config with jsonschema\r\n\r\nAlso add a stricter XML parser and use it\r\n\r\n* Use API v1 for the GeoNode legacy harvester\r\n\r\nThis is now being used over the CSW API because there doesn't seem to be any way to filter specific resource types (document, layer, etc) when using the CSW API.\r\n\r\nAlso begin adding a WMS harvester\r\n\r\n* Continue implementation\r\n\r\n* Add harvestable resource list and some way to control them - wip\r\n\r\n* Refactor harvesting in order to take into account selection of which resources should be harvested\r\n\r\n* Automatically check harvestable resources when creating a harvester\r\n\r\nThis is done when creating a harvester both on the django admin and also via REST API\r\n\r\n* Made BaseHarvesterWorker a proper AbstractBaseClass\r\n\r\nThis shall make the interface that child harvesters neet to implement be more evident.\r\n\r\nAlso refactored API endpoints for accessing a harvester's harvestable resources and managing their respective `should_be_harvested` property.\r\n\r\nImplementation is relying on nested routers, as provided by the drf-extensions package\r\n\r\n* Work on REST API for harvesting\r\n\r\nA harvester reource's status can be set to one of the predefined values in order to request updates of the harvester data\r\n\r\n* Implement regeneration of harvestable resources when worker config is changed via admin and API\r\n\r\n* Refactor base harvester worker\r\n\r\nThe harvesting async workflow seems to be mostly modelled now, with the GeoNode legacy harvester as a reference implementation of a worker\r\n\r\nThis commit has some other WIP changes\r\n\r\n* Launch update of harvestble resources with django's on_commit in order to ensure correct behavior\r\n\r\n* Add some docstrings\r\n\r\n* fix some bugs and add support for django 3.2\r\n\r\n* Store a list of CRSs instead of a single one\r\n\r\n* base harvester provides a concrete implementation of update_geonode_resource\r\n\r\nPreviously this was an abstract method, but it is more sensible to provide a default. Note that the actual implementation of this method is not done yet.\r\n\r\n* Adjust name of harvesting dispatcher task in serializers.py\r\n\r\n* Update harvester to update using ResourceManager\r\n\r\n* Fix jsonfield error\r\n\r\n* adapting base worker\r\n\r\n* fix failing test\r\n\r\n* [Resource Manager] Implement \"copy\" resource method #224\r\n\r\n* Initial integration with resource_manager for the GeoNode harvester\r\n\r\n* [Fixes #7692] Layers caching problem (#7691)\r\n\r\n* Implement removal of harvestable resources that are no longer relevant\r\n\r\nAlso improved GeoNodeLegacyHarvester's abilities to report on existing remote resources. This now takes into account the current preferences for harvesting layers, maps and documents\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Trying to speed up tests\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* [Issue 80] Add name and typename to legacy api\r\n\r\n* [Issue 80] Add links to v2 api\r\n\r\n* [Issue 80] rollback unwanted changes\r\n\r\n* Implement removal of orphaned resources\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* Implement saving a document's URL and thumbnail in the GeoNode harvesting worker\r\n\r\n* [CircleCI] Fix and speeding up tests: api.tests base.tests\r\n\r\n* - PEP8 issues plus a minor refactoring of the harvesting api urls pattern\r\n\r\n* - PEP8 issues use logger.exception accordingly to the doc and remove unneeded exceptions concat\r\n\r\n* get rid of redundant exception logging\r\n\r\n* Fix error pk assignee by sequnce object\r\n\r\n* - Make sure the \"saved_layer\" is valid\r\n\r\n* Extend HarvesterWorkerBase to allow creating other types of geonode resources\r\n\r\n* [LGTM] Fix LGTM issues\r\n\r\n* - Add \"rabbitmqadmin\" shell utility command\r\n\r\n* [CircleCI] Fix and speedup security tests\r\n\r\n* Make resource description more flexible in order to handle missing values\r\n\r\n* [Pep8] Fix issues\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [Fixes #7717] Temporary files created under static root are never removed\r\n\r\n* [Pep8] Fix issues\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [Fixes #7717] Temporary files created under static root are never removed\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* Missing changes from 7693\r\n\r\n* Missing changes from 7693\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [Fixes #262] Rename Layer / Layers to Dataset / Datasets inside operations pages\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* Add mo files\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* [CircleCI] Fix and speed-up Test Cases\r\n\r\n* Modify button links\r\n\r\n* - Typo: UnboundLocalError: local variable '_disable_layer_cache' referenced before assignment\r\n\r\n* [Resource Manager] Make the RM able to set thumbs for Documents also\r\n\r\n* - Avoid redundant logs on error stdout\r\n\r\n* - Added local enviroment to simplify people advanced install setup\r\n\r\n* [Hardening] Improve background error logging and avoid usefulness cycles in the case the image is good\r\n\r\n* [Dependencies] Align \"setup.cfg\" to the \"requirements.txt\" file\r\n\r\n* Fix MetaData update redirect\r\n\r\n* [Resource Manager] Ingest method\r\n\r\n* [Hardening] Catch IntegrityError on contributios migrations\r\n\r\n* ISSUE 277: add storetype to resourcebase\r\n\r\n* [Resource Manager] GeoServer concrete \"ingest\": make a temporary local copy of the stored files\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [Pep8] Fix pep8 issues\r\n\r\n(cherry picked from commit 7360cdb6708759f7ee7e91f003fd254691816fd6)\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* ISSUE 277: rename storetype for layers\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [ISSUE  #298] Add state property to resources endpoint response\r\n\r\n* Rename endpoint from layers to datasets\r\n\r\n* [WIP][ISSUE #299] Expose resource manager methods as resource REST API endpoints\r\n\r\n* [WIP][ISSUE #299] Expose resource manager methods as resource REST API endpoints\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* change Layer to Dataset\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [WIP][ISSUE #299] Expose resource manager methods as resource REST API endpoints\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* [CircleCI] Tests fixes\r\n\r\n* - Optimize migrations\r\n\r\n - Fix wrong field on resource/utils.py methods\r\n\r\n* - Fix Migrations\r\n\r\n* - Bump django-geonode-mapstore-client to version 4.0.0\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* [CircleCI] Test fixes\r\n\r\n* Rename endpoint from layers to datasets #885\r\n\r\nCo-authored-by: mattiagiupponi <mattia.giupponi@gmail.com>\r\nCo-authored-by: mattiagiupponi <51856725+mattiagiupponi@users.noreply.github.com>\r\nCo-authored-by: marthamareal <marthamareal@gmail.com>\r\nCo-authored-by: Ricardo Garcia Silva <ricardo@kartoza.com>\r\nCo-authored-by: meomancer <meomancer@gmail.com>\r\nCo-authored-by: Giovanni Allegri <571129+giohappy@users.noreply.github.com>\r\nCo-authored-by: Giovanni Allegri <giohappy@gmail.com>"}},"url":"https://api.github.com/repos/italogsfernandes/geonode/commits/f760e0fc03baacb949650e6ada248ff8b9fd4c91","html_url":"https://github.com/italogsfernandes/geonode/commit/f760e0fc03baacb949650e6ada248ff8b9fd4c91","comments_url":"https://api.github.com/repos/italogsfernandes/geonode/commits/f760e0fc03baacb949650e6ada248ff8b9fd4c91/comments","author":{"login":"afabiani","id":1278021,"node_id":"MDQ6VXNlcjEyNzgwMjE=","avatar_url":"https://avatars.githubusercontent.com/u/1278021?v=4","gravatar_id":"","url":"https://api.github.com/users/afabiani","html_url":"https://github.com/afabiani","followers_url":"https://api.github.com/users/afabiani/followers","following_url":"https://api.github.com/users/afabiani/following{/other_user}","gists_url":"https://api.github.com/users/afabiani/gists{/gist_id}","starred_url":"https://api.github.com/users/afabiani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afabiani/subscriptions","organizations_url":"https://api.github.com/users/afabiani/orgs","repos_url":"https://api.github.com/users/afabiani/repos","events_url":"https://api.github.com/users/afabiani/events{/privacy}","received_events_url":"https://api.github.com/users/afabiani/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"dcaaed932b37131b0ce37a15b8641111d9f21106","url":"https://api.github.com/repos/italogsfernandes/geonode/commits/dcaaed932b37131b0ce37a15b8641111d9f21106","html_url":"https://github.com/italogsfernandes/geonode/commit/dcaaed932b37131b0ce37a15b8641111d9f21106"}]}]