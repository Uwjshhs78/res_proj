[{"sha":"9a8a1e0bed3505aa2ac124c62bb9719e35a0bfd1","node_id":"C_kwDODe8zCNoAKDlhOGExZTBiZWQzNTA1YWEyYWMxMjRjNjJiYjk3MTllMzVhMGJmZDE","commit":{"author":{"name":"Minttu Hurme","email":"ammsalme@users.noreply.github.com","date":"2021-10-29T12:16:12Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-10-29T12:16:12Z"},"message":"Updates, Split mongo tables (#22)\n\nv2.0.1-alpha.2\r\nRequire node >=14\r\n\r\nUpdate melinda-rest-api-commons to v8\r\n\r\nUpdate dependencies\r\n\r\nUpdate drone and docker\r\n\r\nUse separate Mongo collections/tables for prio and bulk jobs\r\n\r\nUpdate the QUEUE_ITEM_STATEs used in flow\r\n\r\nRead responses for prio jobs from Mongo queueItem instead of Amqp queue\r\n** Use queueItem.errorMessage from Mongo for timeouts\r\n** Use queueItem.noopValidationMessages from Mongo for noop-job responses\r\n\r\nBetter 400 errors (Better 400 errors #21)\r\n** Better 400 errors for missing mandatory query parameters in bulk\r\n** Validate pOldNew\r\n\r\nFix bulk readContent and doQuery (Fix bulk read content #23)\r\n** Catch errors from bulk readContent\r\n** Catch errors from doQuery\r\n\r\nFix checkAcceptHeader\r\n\r\nSplit function getResponseDataForDoneNError that had too many statements\r\n\r\nFix removing queues from Mongo\r\n\r\nDo not use await for removeQueue\r\n\r\nSanitize Mongo query inputs\r\n\r\nAdd operationSettings to Mongo queueItem\r\n** Add prio value to queueItem for bulk items\r\n** Add prio, noop, unique values to queueItem for prio items\r\n\r\nUpdate api.json\r\n\r\nUpdate readme.md\r\n** Clean up readme\r\n** Add version and node-version badges\r\n\r\nClean up logging\r\n\r\nRemove some duplicate code\r\n\r\nRemove unnecessary eslint-disables\r\n\r\nAdd some data for testing\r\n\r\nCo-authored-by: natlibfi-jonollil 53558796+natlibfi-jonollil@users.noreply.github.com","tree":{"sha":"6d248f53aa2d1b9c54bb723f4181794ceb70f20c","url":"https://api.github.com/repos/NatLibFi/melinda-rest-api-http/git/trees/6d248f53aa2d1b9c54bb723f4181794ceb70f20c"},"url":"https://api.github.com/repos/NatLibFi/melinda-rest-api-http/git/commits/9a8a1e0bed3505aa2ac124c62bb9719e35a0bfd1","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhe+YMCRBK7hj4Ov3rIwAAAvkIACnPybGdBiP6Bfe70LY51EUE\n0ackhxY3n68uwHy0tqcmHc57yZ88TOXyIbq32K6W/r1q9toGzEOmgZ413SuyCWm4\nNV9DxA97vEP0fPSHi/F4ahg51kMx6hr5eFqnEOUG+a5kWgsRaJ6mHzorPjrcfUyP\nnzJPm3Ok5L9Gs1NLDRlalHDCmgIOXb1s83LTwCUehMTNi8OZgrcM7JjHiYSPiq9c\nfR9KmfmPL87OjUEF9QQmDnif/TuQyBAXaeH+SGcYUK+B4UryDw/IX1+TZUo6M+zn\nZScbsKccnRNLZ+yaPx8hc6XENkMRbKgfzIP3JLUTr7Nd7EaB9/mXAOT6uhDM6HQ=\n=Cn7s\n-----END PGP SIGNATURE-----\n","payload":"tree 6d248f53aa2d1b9c54bb723f4181794ceb70f20c\nparent 0252517d2184f6cddd07ed44bf0a42dbf0d5eb21\nauthor Minttu Hurme <ammsalme@users.noreply.github.com> 1635509772 +0300\ncommitter GitHub <noreply@github.com> 1635509772 +0300\n\nUpdates, Split mongo tables (#22)\n\nv2.0.1-alpha.2\r\nRequire node >=14\r\n\r\nUpdate melinda-rest-api-commons to v8\r\n\r\nUpdate dependencies\r\n\r\nUpdate drone and docker\r\n\r\nUse separate Mongo collections/tables for prio and bulk jobs\r\n\r\nUpdate the QUEUE_ITEM_STATEs used in flow\r\n\r\nRead responses for prio jobs from Mongo queueItem instead of Amqp queue\r\n** Use queueItem.errorMessage from Mongo for timeouts\r\n** Use queueItem.noopValidationMessages from Mongo for noop-job responses\r\n\r\nBetter 400 errors (Better 400 errors #21)\r\n** Better 400 errors for missing mandatory query parameters in bulk\r\n** Validate pOldNew\r\n\r\nFix bulk readContent and doQuery (Fix bulk read content #23)\r\n** Catch errors from bulk readContent\r\n** Catch errors from doQuery\r\n\r\nFix checkAcceptHeader\r\n\r\nSplit function getResponseDataForDoneNError that had too many statements\r\n\r\nFix removing queues from Mongo\r\n\r\nDo not use await for removeQueue\r\n\r\nSanitize Mongo query inputs\r\n\r\nAdd operationSettings to Mongo queueItem\r\n** Add prio value to queueItem for bulk items\r\n** Add prio, noop, unique values to queueItem for prio items\r\n\r\nUpdate api.json\r\n\r\nUpdate readme.md\r\n** Clean up readme\r\n** Add version and node-version badges\r\n\r\nClean up logging\r\n\r\nRemove some duplicate code\r\n\r\nRemove unnecessary eslint-disables\r\n\r\nAdd some data for testing\r\n\r\nCo-authored-by: natlibfi-jonollil 53558796+natlibfi-jonollil@users.noreply.github.com"}},"url":"https://api.github.com/repos/NatLibFi/melinda-rest-api-http/commits/9a8a1e0bed3505aa2ac124c62bb9719e35a0bfd1","html_url":"https://github.com/NatLibFi/melinda-rest-api-http/commit/9a8a1e0bed3505aa2ac124c62bb9719e35a0bfd1","comments_url":"https://api.github.com/repos/NatLibFi/melinda-rest-api-http/commits/9a8a1e0bed3505aa2ac124c62bb9719e35a0bfd1/comments","author":{"login":"ammsalme","id":8925485,"node_id":"MDQ6VXNlcjg5MjU0ODU=","avatar_url":"https://avatars.githubusercontent.com/u/8925485?v=4","gravatar_id":"","url":"https://api.github.com/users/ammsalme","html_url":"https://github.com/ammsalme","followers_url":"https://api.github.com/users/ammsalme/followers","following_url":"https://api.github.com/users/ammsalme/following{/other_user}","gists_url":"https://api.github.com/users/ammsalme/gists{/gist_id}","starred_url":"https://api.github.com/users/ammsalme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ammsalme/subscriptions","organizations_url":"https://api.github.com/users/ammsalme/orgs","repos_url":"https://api.github.com/users/ammsalme/repos","events_url":"https://api.github.com/users/ammsalme/events{/privacy}","received_events_url":"https://api.github.com/users/ammsalme/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"0252517d2184f6cddd07ed44bf0a42dbf0d5eb21","url":"https://api.github.com/repos/NatLibFi/melinda-rest-api-http/commits/0252517d2184f6cddd07ed44bf0a42dbf0d5eb21","html_url":"https://github.com/NatLibFi/melinda-rest-api-http/commit/0252517d2184f6cddd07ed44bf0a42dbf0d5eb21"}]}]