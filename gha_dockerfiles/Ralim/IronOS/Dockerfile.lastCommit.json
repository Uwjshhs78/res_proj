[{"sha":"3594604efc4a68c0bdcafcb6236303d9c1b4a5ec","node_id":"C_kwDOBA7cKtoAKDM1OTQ2MDRlZmM0YTY4YzBiZGNhZmNiNjIzNjMwM2Q5YzFiNGE1ZWM","commit":{"author":{"name":"Ben V. Brown","email":"5425387+Ralim@users.noreply.github.com","date":"2021-10-02T04:48:58Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-10-02T04:48:58Z"},"message":"Fixes for I2C on Pinecil + USB-PD stack (#1099)\n\n* Remove unused includes\r\n\r\n* Adding in submodule\r\n\r\n* Move fusb functions to the BSP\r\n\r\n* Remove old code\r\n\r\n* Creating IronOS PD integration wrapper\r\n\r\n* Redirect to wrapper\r\n\r\n* pd lib updates\r\n\r\n* fix Docker build\r\n\r\n* Finish linking across\r\n\r\n* Cleanup\r\n\r\n* Update Makefile\r\n\r\n* Update push.yml\r\n\r\n* Update push.yml\r\n\r\n* PD -> Compensate for different tick rates\r\n\r\n* Update codeql-analysis.yml\r\n\r\n* Fix PD #define for @Firebie\r\n\r\n* Check irq low at start\r\n\r\n* Update BSP.h\r\n\r\n* Update main.cpp\r\n\r\n* Closer delay\r\n\r\n* Update OLED.cpp\r\n\r\n* Bugfix trying to start QC too early\r\n\r\n* Missing fusb shouldnt hang qc\r\n\r\n* Update FreeRTOSConfig.h\r\n\r\n* Update the GD drivers\r\n\r\n* Update Pinecil IRQ setup\r\n\r\n* Redirect printf() to uart\r\n\r\n* Update Power.cpp\r\n\r\n* Adding extras to PD state\r\n\r\n* Update USBPD.cpp\r\n\r\n* Delay in printf\r\n\r\n* Iterate once before delay on start\r\n\r\n* Update usb-pd\r\n\r\n* master usb-pd now\r\n\r\n* Format gd libs\r\n\r\n* Update gd32vf103_bkp.c\r\n\r\n* Guard with PD timeout\r\n\r\n* Remove CodeQL\r\n\r\n* Slow for testing, fix runt pulses at start\r\n\r\n* Fix runt pulse in read size 1\r\n\r\n* Cleaner probing setup\r\n\r\n* Testing delay during stop gen in read 1\r\n\r\n* Update I2C driver\r\n\r\n* Update gd32vf103_i2c.c\r\n\r\n* Cleaning up i2c wrapper a little, given up on dma for rx\r\n\r\n* Update preRTOS.cpp\r\n\r\n* Update Setup.cpp\r\n\r\n* Update MOVThread.cpp\r\n\r\n* Slow down UART to work with new clock config\r\n\r\n* Better ack setup for 2 byte read\r\n\r\n* Cleanup POW_PD so cant be lost in #includes\r\n\r\n* tipResistance -> TIP_RESISTANCE\r\n\r\n* handle NOP race on len==2\r\n\r\n* Update configuration.h\r\n\r\n* Dont use neg timeout to mask anymore\r\n\r\n* Not required for MHP\r\n\r\n* Fix up source display Miniware\r\n\r\n* Fix race on PD init\r\n\r\n* Update POWThread.cpp\r\n\r\n* Update formatting\r\n\r\n* MHP format\r\n\r\n* Update push.yml\r\n\r\n* Faster TS80P I2C\r\n\r\n* Bugfix for IRQ handlers\r\n\r\n* Correctly handle I2C race on PD access\r\n\r\n* Fix CI error (unused var) and MHP IRQ\r\n\r\n* Test Pinecil alt ADC mode","tree":{"sha":"82f8d3c21cd836cdb2020c02e72cad5965a4b350","url":"https://api.github.com/repos/Ralim/IronOS/git/trees/82f8d3c21cd836cdb2020c02e72cad5965a4b350"},"url":"https://api.github.com/repos/Ralim/IronOS/git/commits/3594604efc4a68c0bdcafcb6236303d9c1b4a5ec","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhV+S6CRBK7hj4Ov3rIwAAYhwIAFmRtCQ6vMT/xTqLYHK62aCu\npgZRy71ZENd4EFtRVUbNL2nU/DsxSKskQlTSsntWJSF6OnAnpEO7zAKT/yAc67Ki\n0okP8g1Bbmm2FRcQKxP0l8m7zmNsfBiPMhiXY2YbkMFIpgc2qUqwBV1MI4Dqxi0t\nGHXj5vo+ctdnhsH0BvVkYmei+ZmG4OQpSeqKSnMMrm1tUERZycie+MUB5B8poX7T\nSs5L9CxwupTDcyiSzybVjicco6JQ5LJfiHV8uG0JyKC9yY2h7NtKySp5pVrIkmf1\nSwJRet1r/gpbZrnSi1i07SGPL4fwnZoqGVvxc9vM0ju2/Hc+LNGwmcYzvCVOdYY=\n=Aien\n-----END PGP SIGNATURE-----\n","payload":"tree 82f8d3c21cd836cdb2020c02e72cad5965a4b350\nparent 04ad5a3bfc6471534caa95be4dd34f94d48209d6\nauthor Ben V. Brown <5425387+Ralim@users.noreply.github.com> 1633150138 +1000\ncommitter GitHub <noreply@github.com> 1633150138 +1000\n\nFixes for I2C on Pinecil + USB-PD stack (#1099)\n\n* Remove unused includes\r\n\r\n* Adding in submodule\r\n\r\n* Move fusb functions to the BSP\r\n\r\n* Remove old code\r\n\r\n* Creating IronOS PD integration wrapper\r\n\r\n* Redirect to wrapper\r\n\r\n* pd lib updates\r\n\r\n* fix Docker build\r\n\r\n* Finish linking across\r\n\r\n* Cleanup\r\n\r\n* Update Makefile\r\n\r\n* Update push.yml\r\n\r\n* Update push.yml\r\n\r\n* PD -> Compensate for different tick rates\r\n\r\n* Update codeql-analysis.yml\r\n\r\n* Fix PD #define for @Firebie\r\n\r\n* Check irq low at start\r\n\r\n* Update BSP.h\r\n\r\n* Update main.cpp\r\n\r\n* Closer delay\r\n\r\n* Update OLED.cpp\r\n\r\n* Bugfix trying to start QC too early\r\n\r\n* Missing fusb shouldnt hang qc\r\n\r\n* Update FreeRTOSConfig.h\r\n\r\n* Update the GD drivers\r\n\r\n* Update Pinecil IRQ setup\r\n\r\n* Redirect printf() to uart\r\n\r\n* Update Power.cpp\r\n\r\n* Adding extras to PD state\r\n\r\n* Update USBPD.cpp\r\n\r\n* Delay in printf\r\n\r\n* Iterate once before delay on start\r\n\r\n* Update usb-pd\r\n\r\n* master usb-pd now\r\n\r\n* Format gd libs\r\n\r\n* Update gd32vf103_bkp.c\r\n\r\n* Guard with PD timeout\r\n\r\n* Remove CodeQL\r\n\r\n* Slow for testing, fix runt pulses at start\r\n\r\n* Fix runt pulse in read size 1\r\n\r\n* Cleaner probing setup\r\n\r\n* Testing delay during stop gen in read 1\r\n\r\n* Update I2C driver\r\n\r\n* Update gd32vf103_i2c.c\r\n\r\n* Cleaning up i2c wrapper a little, given up on dma for rx\r\n\r\n* Update preRTOS.cpp\r\n\r\n* Update Setup.cpp\r\n\r\n* Update MOVThread.cpp\r\n\r\n* Slow down UART to work with new clock config\r\n\r\n* Better ack setup for 2 byte read\r\n\r\n* Cleanup POW_PD so cant be lost in #includes\r\n\r\n* tipResistance -> TIP_RESISTANCE\r\n\r\n* handle NOP race on len==2\r\n\r\n* Update configuration.h\r\n\r\n* Dont use neg timeout to mask anymore\r\n\r\n* Not required for MHP\r\n\r\n* Fix up source display Miniware\r\n\r\n* Fix race on PD init\r\n\r\n* Update POWThread.cpp\r\n\r\n* Update formatting\r\n\r\n* MHP format\r\n\r\n* Update push.yml\r\n\r\n* Faster TS80P I2C\r\n\r\n* Bugfix for IRQ handlers\r\n\r\n* Correctly handle I2C race on PD access\r\n\r\n* Fix CI error (unused var) and MHP IRQ\r\n\r\n* Test Pinecil alt ADC mode"}},"url":"https://api.github.com/repos/Ralim/IronOS/commits/3594604efc4a68c0bdcafcb6236303d9c1b4a5ec","html_url":"https://github.com/Ralim/IronOS/commit/3594604efc4a68c0bdcafcb6236303d9c1b4a5ec","comments_url":"https://api.github.com/repos/Ralim/IronOS/commits/3594604efc4a68c0bdcafcb6236303d9c1b4a5ec/comments","author":{"login":"Ralim","id":5425387,"node_id":"MDQ6VXNlcjU0MjUzODc=","avatar_url":"https://avatars.githubusercontent.com/u/5425387?v=4","gravatar_id":"","url":"https://api.github.com/users/Ralim","html_url":"https://github.com/Ralim","followers_url":"https://api.github.com/users/Ralim/followers","following_url":"https://api.github.com/users/Ralim/following{/other_user}","gists_url":"https://api.github.com/users/Ralim/gists{/gist_id}","starred_url":"https://api.github.com/users/Ralim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ralim/subscriptions","organizations_url":"https://api.github.com/users/Ralim/orgs","repos_url":"https://api.github.com/users/Ralim/repos","events_url":"https://api.github.com/users/Ralim/events{/privacy}","received_events_url":"https://api.github.com/users/Ralim/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"04ad5a3bfc6471534caa95be4dd34f94d48209d6","url":"https://api.github.com/repos/Ralim/IronOS/commits/04ad5a3bfc6471534caa95be4dd34f94d48209d6","html_url":"https://github.com/Ralim/IronOS/commit/04ad5a3bfc6471534caa95be4dd34f94d48209d6"}]}]