[{"sha":"b487fc119f3cef02b289e13d29b80272c4d94c2a","node_id":"MDY6Q29tbWl0MTA1NDM0NTQ1OmI0ODdmYzExOWYzY2VmMDJiMjg5ZTEzZDI5YjgwMjcyYzRkOTRjMmE=","commit":{"author":{"name":"Justin M. Wray","email":"justin@wraysec.com","date":"2017-08-04T00:57:22Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2017-08-04T00:57:22Z"},"message":"Provision Streamlined, Quick Setup Added, and Multiple Containers Support (#535)\n\n* Separate docker containers per service\r\n\r\n* Provision Streamlined, Quick Setup Added, and Multiple Containers Support\r\n\r\n* The project now includes a number of \"Quick Setup\" options to ease the installation or startup process of the platform.  The following Quick Setup modes are available:\r\n\r\n  *  Direct Installation - Used when directly installing to the system you are on; this is useful when installing on bare metal, an existing VM, or a cloud-based host.\r\n\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup install <dev/prod>`\r\n\r\n  * Multi-Server Direct Installation - Used when directly installing the platform with each service on a separate system; this is useful when installing on bare metal systems, existing VMs, or cloud-based hosts.\r\n\r\n    * Database Server (MySQL)\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup install_multi_mysql <dev/prod>`\r\n\r\n    * Cache Server (Memcached)\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup install_multi_nginx <dev/prod>`\r\n\r\n    * HHVM Server (HHVM)\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup install_multi_hhvm <dev/prod> <IP of MySQL Server> <IP of Memcached Server>`\r\n\r\n    * Web Server (Nginx)\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup install_multi_nginx <dev/prod> <IP of HHVM Server>`\r\n\r\n  * Standard Docker Startup - Used when running FBCTF as a single docker container.\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup start_docker <dev/prod>`\r\n\r\n  * Multi-Container Docker Startup - Used when running FBCTF on docker with each service hosted in a separate docker container.\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup start_docker_multi <dev/prod>`\r\n\r\n  * Standard Vagrant Startup - Used when running FBCTF as a single vagrant container.\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup start_docker <dev/prod>`\r\n\r\n  * Multi-Container Vagrant Startup - Used when running FBCTF on vagrant with each service hosted in a separate vagrant container.\r\n      * `source ./extra/lib.sh`\r\n      * `quick_setup start_docker_multi <dev/prod>`\r\n\r\n* Each installation platform now supports both Production Mode (prod) and Development Mode (dev).\r\n\r\n* The `provision.sh` script has been streamlined and organized based on the services being installed.  The installation process now also includes more logging and error handling.  Common and core functionally has been migrated to `lib.sh` where appropriate.  Color coding has been added to the various output to make quick visual monitoring of the process easier.\r\n\r\n* Package installation, specifically the check for existing packages has been updated to fix an issue where packages would sometimes not be installed if a similarly named package was already present on the system.\r\n\r\n* The `provision.sh` script now supports separate installations for each service using the `--multiple-servers` and `--server-type` options.\r\n\r\n* HHVM configuration has been updated to run HHVM as a network-service.\r\n\r\n* Nginx configuration is now included in the platform code base and utilized.\r\n\r\n* Docker service startup scripts are included for each of the services:\r\n  * `./extra/mysql/mysql_startup.sh`\r\n  * `./extra/hhvm/hhvm_startup.sh`\r\n  * `./extra/nginx/nginx_startup.sh`\r\n\r\n* This PR fixes the docker installation dependencies issue #534.\r\n\r\n* This PR includes docker-compose configurations for multi-docker containers, fixing issue #440.\r\n\r\n* Services on Docker (both single container and multi-container) are now monitored to ensure they do not fail.\r\n\r\n* This PR updates HHVM to the latest stable version for Ubuntu 14.04, HHVM Version 3.18.1, fixing issue #496.\r\n\r\n* Attachment/Upload permissions have been corrected across the installation environments.  This fixes issues with improper permissions on Docker and Vagrant while still enforcing secure file permissions.  This should resolve issues like #280 going forward.\r\n\r\n* Implemented more strict permissions on he CTF PATH (755 verses 777).\r\n\r\n* Fixed long-standing, upstream induced, HHVM socket permission issues (like #229), mostly experienced in Docker or after a restart (resulting in a _502 Bad Gateway_):  https://github.com/facebook/hhvm/issues/6336.  Note that this fix is a temporary workaround until the upstream issue is resolved.\r\n\r\n* With the introduction of the latest available version of HHVM and the inclusion of multiple-server support, performance increases should be noticeable.  This should help alleviate issues like #456.\r\n\r\n* This PR was derived, in part, from PR #530.\r\n\r\n* Added Memcached Service Restart to container service script\r\n\r\n* Added logging of PHP/HHVM version to provision script.\r\n\r\n* Added logging of PHP Alternatives to provision script.\r\n\r\n* Composer is now installed with the HHVM binary instead of PHP.\r\n\r\n* Composer Install is run with the HHVM binary instead of PHP.\r\n\r\n* The Travis trusty Ubuntu image has been downgraded from `sugilite` to `connie`.\r\n\r\n* Updated run_tests.sh to have write permissions to settings.ini\r\n\r\n* Set run_tests.sh to use localhost for DB and MC.\r\n\r\n* HHVM 3.18+ enforces \\HH\\FormatString - Invariant calls now are of \\HH\\FormatString type - All `invariant()` calls that are passing in a variable argument have been updated to use literal strings for the format string.  Invariant passes the second (and subsequent) arguments to `sprintf()`.  The second parameter of `invariant()` must be a literal string, containing placeholders when needed.  More information can be found here:  hhvm/user-documentation#448.  This change ensures the code is strict compliant in HHVM versions 3.18","tree":{"sha":"1583a21845b4130489348529afc0f871f54166be","url":"https://api.github.com/repos/nahidupa/fbctf/git/trees/1583a21845b4130489348529afc0f871f54166be"},"url":"https://api.github.com/repos/nahidupa/fbctf/git/commits/b487fc119f3cef02b289e13d29b80272c4d94c2a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/nahidupa/fbctf/commits/b487fc119f3cef02b289e13d29b80272c4d94c2a","html_url":"https://github.com/nahidupa/fbctf/commit/b487fc119f3cef02b289e13d29b80272c4d94c2a","comments_url":"https://api.github.com/repos/nahidupa/fbctf/commits/b487fc119f3cef02b289e13d29b80272c4d94c2a/comments","author":{"login":"justinwray","id":22864312,"node_id":"MDQ6VXNlcjIyODY0MzEy","avatar_url":"https://avatars.githubusercontent.com/u/22864312?v=4","gravatar_id":"","url":"https://api.github.com/users/justinwray","html_url":"https://github.com/justinwray","followers_url":"https://api.github.com/users/justinwray/followers","following_url":"https://api.github.com/users/justinwray/following{/other_user}","gists_url":"https://api.github.com/users/justinwray/gists{/gist_id}","starred_url":"https://api.github.com/users/justinwray/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinwray/subscriptions","organizations_url":"https://api.github.com/users/justinwray/orgs","repos_url":"https://api.github.com/users/justinwray/repos","events_url":"https://api.github.com/users/justinwray/events{/privacy}","received_events_url":"https://api.github.com/users/justinwray/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"4a7b5b526d0ac4cc6291bbaf517e556477f65b42","url":"https://api.github.com/repos/nahidupa/fbctf/commits/4a7b5b526d0ac4cc6291bbaf517e556477f65b42","html_url":"https://github.com/nahidupa/fbctf/commit/4a7b5b526d0ac4cc6291bbaf517e556477f65b42"}]}]