[{"sha":"14c9b8b88b8c139db5db487672b87e988a1d32af","node_id":"MDY6Q29tbWl0NTUzOTY1MTA6MTRjOWI4Yjg4YjhjMTM5ZGI1ZGI0ODc2NzJiODdlOTg4YTFkMzJhZg==","commit":{"author":{"name":"patrick brisbin","email":"pbrisbin@gmail.com","date":"2016-02-13T02:55:41Z"},"committer":{"name":"patrick brisbin","email":"pbrisbin@gmail.com","date":"2016-03-11T18:25:56Z"},"message":"Refactor handling of mounted code and tmp paths\n\nAdds a \"MountedPath\" abstraction that provides a single identity for the\ncase where we have an in-container path and need to know the on-host\npath it represents for the purpose of re-mounting into other containers.\n\nRemoves the hap-hazard FILESYSTEM_DIR and inconsistently-named CODE_PATH\nenvironment variables. FILESYSTEM_DIR goes away as MountedPath can\nmaintain that functionality itself. CODE_PATH is replaced with\nCODECLIMATE_CODE to be consistent with the new CODECLIMATE_TMP and\nexisting CODECLIMATE_DEBUG.\n\nWe continue to read CODE_PATH if CODECLIMATE_CODE is unspecified. This\nis to support any existing users with their own wrapper scripts in the\nwild (interestingly, Builder fits in this category).\n\nMountedPath internally makes use of a CODECLIMATE_DOCKER variable to set\nthe local and in-container paths as equal if not being run in a\ncontainer. This makes local development and testing more convenient.\n\nHaving CODECLIMATE_TMP means we don't have to force a root-owned /tmp/cc\non our users' machines. Users can set this variable to whatever they\nwant. We make use of this in the specs.\n\nBuilder should work as-is. It assumes /tmp/cc, but that was maintained\nas the default when CODECLIMATE_TEMP is not set. We would now be free to\nuse that variable to make a build-specific temporary directory though.\n\nOne unknown: the test subcommand was messing with the CODE_PATH and\nFILESYSTEM_DIR variables as part of running its analysis. This code is\nuntested (ha) and I don't understand it, so I'm not sure what needs to\nchange to support the MountedPath approach.","tree":{"sha":"a9123c97c61a8aff6d3b18fe93d789e0a0ba4f56","url":"https://api.github.com/repos/etops/codeclimate/git/trees/a9123c97c61a8aff6d3b18fe93d789e0a0ba4f56"},"url":"https://api.github.com/repos/etops/codeclimate/git/commits/14c9b8b88b8c139db5db487672b87e988a1d32af","comment_count":0,"verification":{"verified":false,"reason":"unknown_key","signature":"-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJW4w20AAoJEK22gS+HHUR4+xkP/R/K6x6okc0bdxZiTiQmQ3kZ\nFl9r8jyjIpUoSiSJW4lgoHanG5tkBaRwsgn5f3WmaBRmOuwu/EX0eQ96EIAGow6u\n02VQCZ4oaYM6o0cdRnpkzlsrnG4HIsyOsvcVkuJ3D1Rlb46N5RhuzbsDPErcASH6\nrwzs4uWSRQ7PIbIxqrIARqONB/Kf5POSGvpS2W8kh7JUjM7Hnu4TC4rb3Rmkb+RC\nXxMXoBCpC+w+QVWsVPU4P9LAlXQXg3gDkJyVmjI726wmifEtf5isdGWD05hbRYWs\nnQEIe03w4n0y1UEYAXJ1ay8m3GPKhNzCNWoxRGY3N35FNpFZ3TSyhwJCN2ek76LP\nSi35gKpCGCkqCaNbodacI9lW8lw1L4vStLWUN0z2+Vpv2vTRPK4p+jfJ257o9E7l\n0NGwQ8PGZYnZazwtaKSdq075H3jIcCELF8zE+m5lY+5RigjHGoCht3PxefsNxuYI\ndYZBG9x/WQpYiJ8nnZXTlHqHuYToBrWKOQyOcfhesR16SNTOz2HOrcgTLgNdWtZR\nEIiomy8o3UvTtrQl6c2lNDZpeesGYYSRlsTItsurgodJfpfsQJvvD8dFIk5xAMuC\nSaIYLtCPNIXJ/VH6Z/MlSTKzITlzRSyexxz5jLojVTLuilbrmP9qsukoje3AN0zT\n5fv65Rp9pci2qD5gWnSu\n=XGN9\n-----END PGP SIGNATURE-----","payload":"tree a9123c97c61a8aff6d3b18fe93d789e0a0ba4f56\nparent 42a6931419bc6903dbabc45d98a53fdf901c6091\nauthor patrick brisbin <pbrisbin@gmail.com> 1455332141 -0500\ncommitter patrick brisbin <pbrisbin@gmail.com> 1457720756 -0500\n\nRefactor handling of mounted code and tmp paths\n\nAdds a \"MountedPath\" abstraction that provides a single identity for the\ncase where we have an in-container path and need to know the on-host\npath it represents for the purpose of re-mounting into other containers.\n\nRemoves the hap-hazard FILESYSTEM_DIR and inconsistently-named CODE_PATH\nenvironment variables. FILESYSTEM_DIR goes away as MountedPath can\nmaintain that functionality itself. CODE_PATH is replaced with\nCODECLIMATE_CODE to be consistent with the new CODECLIMATE_TMP and\nexisting CODECLIMATE_DEBUG.\n\nWe continue to read CODE_PATH if CODECLIMATE_CODE is unspecified. This\nis to support any existing users with their own wrapper scripts in the\nwild (interestingly, Builder fits in this category).\n\nMountedPath internally makes use of a CODECLIMATE_DOCKER variable to set\nthe local and in-container paths as equal if not being run in a\ncontainer. This makes local development and testing more convenient.\n\nHaving CODECLIMATE_TMP means we don't have to force a root-owned /tmp/cc\non our users' machines. Users can set this variable to whatever they\nwant. We make use of this in the specs.\n\nBuilder should work as-is. It assumes /tmp/cc, but that was maintained\nas the default when CODECLIMATE_TEMP is not set. We would now be free to\nuse that variable to make a build-specific temporary directory though.\n\nOne unknown: the test subcommand was messing with the CODE_PATH and\nFILESYSTEM_DIR variables as part of running its analysis. This code is\nuntested (ha) and I don't understand it, so I'm not sure what needs to\nchange to support the MountedPath approach.\n"}},"url":"https://api.github.com/repos/etops/codeclimate/commits/14c9b8b88b8c139db5db487672b87e988a1d32af","html_url":"https://github.com/etops/codeclimate/commit/14c9b8b88b8c139db5db487672b87e988a1d32af","comments_url":"https://api.github.com/repos/etops/codeclimate/commits/14c9b8b88b8c139db5db487672b87e988a1d32af/comments","author":{"login":"pbrisbin","id":50812,"node_id":"MDQ6VXNlcjUwODEy","avatar_url":"https://avatars.githubusercontent.com/u/50812?v=4","gravatar_id":"","url":"https://api.github.com/users/pbrisbin","html_url":"https://github.com/pbrisbin","followers_url":"https://api.github.com/users/pbrisbin/followers","following_url":"https://api.github.com/users/pbrisbin/following{/other_user}","gists_url":"https://api.github.com/users/pbrisbin/gists{/gist_id}","starred_url":"https://api.github.com/users/pbrisbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pbrisbin/subscriptions","organizations_url":"https://api.github.com/users/pbrisbin/orgs","repos_url":"https://api.github.com/users/pbrisbin/repos","events_url":"https://api.github.com/users/pbrisbin/events{/privacy}","received_events_url":"https://api.github.com/users/pbrisbin/received_events","type":"User","site_admin":false},"committer":{"login":"pbrisbin","id":50812,"node_id":"MDQ6VXNlcjUwODEy","avatar_url":"https://avatars.githubusercontent.com/u/50812?v=4","gravatar_id":"","url":"https://api.github.com/users/pbrisbin","html_url":"https://github.com/pbrisbin","followers_url":"https://api.github.com/users/pbrisbin/followers","following_url":"https://api.github.com/users/pbrisbin/following{/other_user}","gists_url":"https://api.github.com/users/pbrisbin/gists{/gist_id}","starred_url":"https://api.github.com/users/pbrisbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pbrisbin/subscriptions","organizations_url":"https://api.github.com/users/pbrisbin/orgs","repos_url":"https://api.github.com/users/pbrisbin/repos","events_url":"https://api.github.com/users/pbrisbin/events{/privacy}","received_events_url":"https://api.github.com/users/pbrisbin/received_events","type":"User","site_admin":false},"parents":[{"sha":"42a6931419bc6903dbabc45d98a53fdf901c6091","url":"https://api.github.com/repos/etops/codeclimate/commits/42a6931419bc6903dbabc45d98a53fdf901c6091","html_url":"https://github.com/etops/codeclimate/commit/42a6931419bc6903dbabc45d98a53fdf901c6091"}]}]