[{"sha":"81a9b5317376e16542ce54e609db387d99f9e2b6","node_id":"MDY6Q29tbWl0NjQwMzQ1MjM6ODFhOWI1MzE3Mzc2ZTE2NTQyY2U1NGU2MDlkYjM4N2Q5OWY5ZTJiNg==","commit":{"author":{"name":"David Rodriguez","email":"dissonant.tech@gmail.com","date":"2021-08-19T14:58:05Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-08-19T14:58:05Z"},"message":"Multistage dockerfile (#1820)\n\n* Implement multi-stage Docker build\r\n\r\nUpdates the Dockerfile to leverage multi-stage build and ensure that the\r\nruntime contains only the dependencies required to run OpsDroid.\r\n\r\nThe final container was updated to run as an unprivileged user.\r\n\r\nThe concepts used to build this new version of the Docker image mostly\r\ncome from Bitnami's recommendations:\r\nhttps://engineering.bitnami.com/articles/best-practices-writing-a-dockerfile.html\r\n\r\nThe wheel `unversal` flag was removed since the project does not have C\r\nextensions, nor supports Python 2 (see\r\nhttps://packaging.python.org/guides/distributing-packages-using-setuptools/#wheels\r\nfor reference).\r\n\r\n* Fix docker-min tox build\r\n\r\n* Fix versioneer\r\n\r\n* Remove [wheel] block from setup.cfg\r\n\r\n* Add git dependency during build phase as a fix for versioneer\r\n\r\n* Add olm to runtime Docker image\r\n\r\n* Set `--user root` when installing curl in testing\r\n\r\n* Update Dockerfile\r\n\r\nCo-authored-by: Rémy Greinhofer <remy.greinhofer@gmail.com>\r\nCo-authored-by: Jacob Tomlinson <jacobtomlinson@users.noreply.github.com>","tree":{"sha":"867fcc1e01008d92e839313011f3573c2db1cab1","url":"https://api.github.com/repos/opsdroid/opsdroid/git/trees/867fcc1e01008d92e839313011f3573c2db1cab1"},"url":"https://api.github.com/repos/opsdroid/opsdroid/git/commits/81a9b5317376e16542ce54e609db387d99f9e2b6","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhHnF9CRBK7hj4Ov3rIwAA9EoIAG+nq1A0jCPd7l2WlUQbtWjc\n3T4nA8OoRGgmXfQkbSeaoP3nPy3gsYM8V002FjmxYJZANRvUyA7IyRgFF2p5vQ0o\n2hn9hCi3r83vpo8aaYJC4dsaoxHaNTPrZwNyx8pNow/Q9a9qC8SHAmDhMVir4uyE\n4iK6Sy/qExGPThG+ZaYKLcpQ0/SrSSZzK2OzyQ0pE0DeSp7Sf9cIDA4oNfgOydbT\nrpb/CFaHL1ID2QBbItkGrUPbABpkB0UmZIOVLU9Jm7FWgFA+DbASWdfhVZjgEQb7\n02Vbp8a/4RrW/CEbnqJ/lGtjwSwM7Uw7H3HH3raSwnwFCfDjNcf8lCZYpZ76oNE=\n=Z17x\n-----END PGP SIGNATURE-----\n","payload":"tree 867fcc1e01008d92e839313011f3573c2db1cab1\nparent 522cfcbcb2abbbe2d6926820855fa90516fdd611\nauthor David Rodriguez <dissonant.tech@gmail.com> 1629385085 -0400\ncommitter GitHub <noreply@github.com> 1629385085 +0000\n\nMultistage dockerfile (#1820)\n\n* Implement multi-stage Docker build\r\n\r\nUpdates the Dockerfile to leverage multi-stage build and ensure that the\r\nruntime contains only the dependencies required to run OpsDroid.\r\n\r\nThe final container was updated to run as an unprivileged user.\r\n\r\nThe concepts used to build this new version of the Docker image mostly\r\ncome from Bitnami's recommendations:\r\nhttps://engineering.bitnami.com/articles/best-practices-writing-a-dockerfile.html\r\n\r\nThe wheel `unversal` flag was removed since the project does not have C\r\nextensions, nor supports Python 2 (see\r\nhttps://packaging.python.org/guides/distributing-packages-using-setuptools/#wheels\r\nfor reference).\r\n\r\n* Fix docker-min tox build\r\n\r\n* Fix versioneer\r\n\r\n* Remove [wheel] block from setup.cfg\r\n\r\n* Add git dependency during build phase as a fix for versioneer\r\n\r\n* Add olm to runtime Docker image\r\n\r\n* Set `--user root` when installing curl in testing\r\n\r\n* Update Dockerfile\r\n\r\nCo-authored-by: Rémy Greinhofer <remy.greinhofer@gmail.com>\r\nCo-authored-by: Jacob Tomlinson <jacobtomlinson@users.noreply.github.com>"}},"url":"https://api.github.com/repos/opsdroid/opsdroid/commits/81a9b5317376e16542ce54e609db387d99f9e2b6","html_url":"https://github.com/opsdroid/opsdroid/commit/81a9b5317376e16542ce54e609db387d99f9e2b6","comments_url":"https://api.github.com/repos/opsdroid/opsdroid/commits/81a9b5317376e16542ce54e609db387d99f9e2b6/comments","author":{"login":"Dissonant-Tech","id":8030680,"node_id":"MDQ6VXNlcjgwMzA2ODA=","avatar_url":"https://avatars.githubusercontent.com/u/8030680?v=4","gravatar_id":"","url":"https://api.github.com/users/Dissonant-Tech","html_url":"https://github.com/Dissonant-Tech","followers_url":"https://api.github.com/users/Dissonant-Tech/followers","following_url":"https://api.github.com/users/Dissonant-Tech/following{/other_user}","gists_url":"https://api.github.com/users/Dissonant-Tech/gists{/gist_id}","starred_url":"https://api.github.com/users/Dissonant-Tech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dissonant-Tech/subscriptions","organizations_url":"https://api.github.com/users/Dissonant-Tech/orgs","repos_url":"https://api.github.com/users/Dissonant-Tech/repos","events_url":"https://api.github.com/users/Dissonant-Tech/events{/privacy}","received_events_url":"https://api.github.com/users/Dissonant-Tech/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"522cfcbcb2abbbe2d6926820855fa90516fdd611","url":"https://api.github.com/repos/opsdroid/opsdroid/commits/522cfcbcb2abbbe2d6926820855fa90516fdd611","html_url":"https://github.com/opsdroid/opsdroid/commit/522cfcbcb2abbbe2d6926820855fa90516fdd611"}]}]